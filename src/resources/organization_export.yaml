---
!include ../includes.yaml
name: organization_export
comment: |
  An _organization_export_ object represents a request to export the complete data of an Organization
  in JSON format.

  To export an Organization using this API:

  * Create an  and store the id that is returned.\
  * Request the _organization_export_ every few minutes, until the _state_ field contains 'finished'.\
  * Download the file located at the URL in the _download_url_ field.

  Exports can take a long time, from several minutes, to hours for large Organizations.

  These endpoints are only available to [Service Accounts](/guide/help/premium/service-accounts)
  of an [Enterprise](/enterprise) Organization.
properties:

  - name: id
    <<: *PropType.Id
    comment: |
      Globally unique ID of the Organization export.

  - name: created_at
    <<: *PropType.DateTime
    access: Read-only
    comment: |
      The time at which this export was requested.

  - name: download_url
    type: String
    example_values:
      - "'https://asana-export.s3.amazonaws.com/export-4632784536274-20170127-43246.json.gz?AWSAccessKeyId=xxxxxxxx'"
      - "null"
    access: Read-only
    comment: |
      Download this URL to retreive the full export of the organization in JSON format. It will be
      compressed in a gzip (.gz) container.
    notes:
      - |
        May be null if the export is still in progress or failed. If present, this URL
        may only be valid for 1 hour from the time of retrieval. You should avoid
        persisting this URL somewhere and just refresh it on demand to ensure you
        do not keep stale URLs.

  - name: state
    type: String
    example_values:
      - "'pending'"
      - "'started'"
      - "'finished'"
      - "'error'"
    access: Read-only
    comment: |
      The current state of the export.

  - name: organization
    <<: *PropType.Workspace
    comment: |
      The Organization that is being exported. This can only be specified at create time.

action_classes:
  - name: Get an Organization export
    url: get
  - name: Create a request to export an Organization
    url: create

actions:

  # Create, Retrieve

  - name: findById
    class: get
    method: GET
    path: "/organization_exports/%s"
    params:
      - name: organization_export
        <<: *Param.Id
        required: true
        comment: |
          Globally unique identifier for the Organization export.
    comment: |
      Returns details of a previously-requested Organization export.

  - name: create
    class: create
    method: POST
    path: "/organization_exports"
    params:
      - name: organization
        <<: *Param.WorkspaceId
        required: true
    comment: |
      This method creates a request to export an Organization. Asana will perform the export at some
      point after you create the request.
