---
!include ../includes.yaml
name: attachment
comment: |
  An _attachment_ object represents any file attached to a task in Asana,
  whether it's an uploaded file or one associated via a third-party service
  such as Dropbox or Google Drive.
properties:

  - name: created_at
    <<: *PropType.DateTime
    access: Read-only
    comment: |
      The time at which this attachment was uploaded.

  - name: download_url
    <<: *PropType.DownloadUrl
    comment: |
      The URL containing the content of the attachment.
    notes:
      - |
        May be 'null' if the attachment is hosted by box. If present, this URL
        may only be valid for 1 hour from the time of retrieval. You should avoid
        persisting this URL somewhere and just refresh it on demand to ensure you
        do not keep stale URLs.

  - name: host
    <<: *PropType.Host
    comment: |
      The service hosting the attachment. Valid values are 'asana', 'dropbox',
      'gdrive' and 'box'.

  - name: name
    <<: *PropType.FileName
    comment: |
      The name of the file.

  - name: parent
    <<: *PropType.Task
    comment: |
      The task this attachment is attached to.

  - name: view_url
    <<: *PropType.ViewUrl
    comment: |
      The URL where the attachment can be viewed, which may be friendlier to
      users in a browser than just directing them to a raw file.

actions:

  # Create, Retrieve, Update, Delete

  - name: findById
    method: GET
    path: "/attachments/%d"
    params:
      - name: attachment
        <<: *Param.AttachmentId
        required: true
    comment: |
      Returns the full record for a single attachment.

  - name: findByTask
    method: GET
    path: "/tasks/%d/attachments"
    collection: true
    params:
      - name: task
        <<: *Param.TaskId
        required: true
    comment: |
      Returns the compact records for all attachments on the task.

  - name: createOnTask
    method: POST
    path: "/tasks/%d/attachments"
    no_code: true  # Uploading attachments must be hand-coded
    params:
      - name: task
        <<: *Param.TaskId
        required: true
      - name: file
        type: File
        example_values:
          - TBD
        required: true
        comment: TBD
    comment: |
      Returns the compact records for all attachments on the task.
